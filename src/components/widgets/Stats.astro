---
import type { Stats as Props } from '~/types';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';
import { Icon } from 'astro-icon/components';

const {
  title = await Astro.slots.render('title'),
  subtitle = await Astro.slots.render('subtitle'),
  tagline,
  stats = [],

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl mx-auto ${classes?.container ?? ''}`} bg={bg}>
  <Headline title={title} subtitle={subtitle} tagline={tagline} />
  <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
    {
      stats &&
        stats.map(({ amount, title, icon }) => (
          <div class="p-6 md:p-8 rounded-[28px] text-center
                      bg-white/80 dark:bg-ink-800/70 backdrop-blur-sm
                      border border-azure-100/30 dark:border-azure-800/20
                      shadow-[0_8px_30px_rgba(43,116,255,0.06)] dark:shadow-[0_8px_30px_rgba(0,0,0,0.2)]
                      transition-all duration-300 ease-out
                      hover:shadow-[0_16px_40px_rgba(43,116,255,0.10)] hover:-translate-y-1
                      dark:hover:shadow-[0_16px_40px_rgba(0,0,0,0.35)]
                      intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade intersect-quarter">
            {icon && (
              <div class="flex items-center justify-center mx-auto mb-4 w-14 h-14 rounded-full
                          bg-gradient-to-br from-azure-500 to-aqua-500 text-white shadow-md">
                <Icon name={icon} class="w-7 h-7" />
              </div>
            )}
            {amount && (
              <div class="font-heading text-transparent bg-clip-text bg-gradient-to-r from-azure-500 to-aqua-500
                          text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight">
                {amount}
              </div>
            )}
            {title && (
              <div class="text-sm font-semibold uppercase tracking-wider text-ink-400 dark:text-ink-300 mt-2">
                {title}
              </div>
            )}
          </div>
        ))
    }
  </div>
</WidgetWrapper>
